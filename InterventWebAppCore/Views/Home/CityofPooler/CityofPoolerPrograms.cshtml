@using InterventWebApp
@{
	ViewBag.Title = "LandingPages";
	Layout = "~/Views/Shared/_AnonymousLayout.cshtml";
	ViewBag.Details = "LandingPage";
}

@Html.Partial("CityofPooler/_CityofPoolerHeader", new ViewDataDictionary(ViewData) { { "OrgId", ViewData["OrgId"] }, { "MenuClass", "" }, { "DateFormat", ViewData["DateFormat"]} })

<section class="lmc-prog-wrapper lmc-index title-casing">
    <div class="grid-container">
        <div class="grid-x grid-margin-x">
            <div class="cell large-3 medium-4" data-sticky-container>
                <article class="lmc-sidebar sticky" data-sticky data-margin-top="3.75" data-btm-anchor="success-stories:bottom" data-sticky-on="small">
                    <div class="prog-sidebar-links">
                        <p>@Translate.Message("L3598")</p>

                        <ul>
                            <li class="is-active"><a href="#self-help-section" data-offset="70"><img src="~/Images/lmc/lmc-icon-self-help.png" alt="">@Translate.Message("L1913")</a></li>
                        </ul>
                    </div>
                    <div class="prog-sidebar-links">
                        <p>@Translate.Message("L3602")</p>

                        <ul>
                            <li><a href="#health-section" data-offset="70"><img src="~/Images/lmc/lmc-icon-health-assess.png" alt="">@Translate.Message("L3603")</a></li>
                        </ul>
                    </div>
                </article>
            </div>

            <div class="cell large-9 medium-8">
                <section class="prog-detail-section lmc-accordion-sec" id="coached-section">
                    <div class="title-section">
                        <div class="title-content">
                            <h3><span>@Translate.Message("L3598")</span>@Translate.Message("L3604")</h3>
                        </div>
                    </div>

                    <div class="content-section">
                        <ul class="accordion" data-accordion data-allow-all-closed="true">
                            <li class="accordion-item white-container prog-detail-section is-active" data-accordion-item id="self-help-section">
                                <!-- Accordion tab title -->
                                <a href="#" class="accordion-title">@Translate.Message("L1913")</a>

                                <div class="accordion-content" data-tab-content>
                                    <p>@Translate.Message("L1914").</p>
                                    <p>@Translate.Message("L1915").</p>
                                    <p>@string.Format(Translate.Message("L1916"), TempData.Peek("OrgContactNumber").ToString()).</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                </section>
                <!--Programs accordion section ends-->

                <section class="prog-detail-section lmc-health-asses-sec" id="health-section">
                    <div class="title-section">
                        <div class="title-content">
                            <h3><span>@Translate.Message("L3602")</span>@Translate.Message("L3603")</h3>
                            <p>
                            <p>@Translate.Message("L2470")
                                <a href="#" class="read-more-link">@Translate.Message("L3646")</a><br /><br />
                                <span class="read-more-content">@Translate.Message("L2471")</span><br /><br />
                                <span class="read-more-content">@Translate.Message("L2472")</span><br /><br />
                            </p>
                        </div>
                        <div class="title-image"><img src="~/Images/lmc/lmc-health-assess.png" alt="" /></div>
                    </div>
                </section>
                <!--Health Assessment section ends-->
            </div>
        </div>
    </div>

    <section class="take-step-section text-center">
        <h2>@Translate.Message("L3651")</h2>
        <div class="button-group align-center">
            <button onclick="window.location.href = '../Home/CityofPooler?signup='+ true;" class="button hide-for-small-only">@Translate.Message("L3652")</button>
            <button data-open="lmc-mobile-signup" class="button show-for-small-only">@Translate.Message("L3652")</button>
            <button onclick="window.location.href = '../Home/CityofPooler';" class="button hollow hide-for-small-only">@Translate.Message("L2084")</button>
            <button data-open="login-modal" class="button hollow show-for-small-only">@Translate.Message("L2084")</button>
        </div>
    </section>
</section>

<div id="lmc-mobile-signup" class="reveal lmc-form" data-reveal data-close-on-click="false" data-close-on-esc="false">
    @Html.Partial("_MobEligSignUp")
    <a class="close-button" data-close id="close">&#215;</a>
</div>

<script>
    $(document).ready(function () {
        $(".prog-sidebar-links li a").on('click', function (e) {
            e.preventDefault();

            //Scroll to respective section
            var hash = $(this).attr("href");
            var topMargin = parseInt($(this).attr("data-offset"));

            $('html, body').animate({
                scrollTop: $(hash).position().top - topMargin
            }, 800);

            //Highlighting the active menu item
            if (!$(this).parent("li").hasClass("is-active")) {
                $(".prog-sidebar-links li").removeClass("is-active");
                $(this).parent("li").addClass("is-active");
            }

            if ($(window).width() < 641) {
                $("p.mobile-dropdown").toggleClass("is-active");
                $(this).parents("article.lmc-sidebar").toggleClass("is-active");
            }
        });

        $(window).on('scroll', function () {
            $('.prog-detail-section').each(function () {
                if ($(window).scrollTop() >= $(this).offset().top - 180) {
                    var id = $(this).attr('id');
                    $('.prog-sidebar-links ul li').removeClass('is-active');
                    $('.prog-sidebar-links ul li a[href="#' + id + '"]').parent('li').addClass('is-active');
                }
            });
        });

        $(".prog-sidebar-links p").on('click', function () {
            if ($(window).width() < 641) {
                $(this).toggleClass("is-active");
                $(this).parents("article.lmc-sidebar").toggleClass("is-active");
            }
        });

        $("a.read-more-link").on('click', function (e) {
            e.preventDefault();
            $(this).hide();
            $(this).siblings("span.read-more-content").show();
        });

        $("ul.accordion li a.accordion-title").on("click", function () {
            $("[data-accordion]").on("down.zf.accordion", function () {
                var titleId = $("ul.accordion li.is-active").attr("id");
                $('html, body').animate({
                    scrollTop: $("#" + titleId).position().top - 70
                }, 800);
            });

        });
    });
</script>
